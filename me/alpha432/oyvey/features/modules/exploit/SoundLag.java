//Deobfuscated with https://github.com/SimplyProgrammer/Minecraft-Deobfuscator3000 using mappings "C:\Program Files\Minecraft Deobfuscator\Mappings\1.12.2"!

//Decompiled by Procyon!

package me.alpha432.oyvey.features.modules.exploit;

import me.alpha432.oyvey.features.modules.*;
import net.minecraft.init.*;
import me.alpha432.oyvey.util.*;
import me.alpha432.oyvey.features.command.*;
import net.minecraft.entity.*;
import net.minecraft.network.*;
import net.minecraft.network.play.client.*;
import net.minecraft.util.math.*;
import net.minecraft.util.*;

public class SoundLag extends Module
{
    private int sheildSlot;
    
    public SoundLag() {
        super("SoundLag", "Lags people with shields", Category.EXPLOIT, true, false, false);
        this.sheildSlot = -1;
    }
    
    @Override
    public void onEnable() {
        this.sheildSlot = InventoryUtil.getItemHotbar(Items.SHIELD);
        if (this.sheildSlot == -1 && SoundLag.mc.player.getHeldItemOffhand().getItem() == Items.SHIELD) {
            Command.sendMessage("No Shield Found In Hotbar");
            this.disable();
            return;
        }
        if (SoundLag.mc.player.getHeldItemOffhand().getItem() != Items.SHIELD) {
            InventoryUtil.switchToHotbarSlot(this.sheildSlot, false);
        }
    }
    
    @Override
    public void onUpdate() {
        if (SoundLag.mc.player.getHeldItemOffhand().getItem() != Items.SHIELD) {
            InventoryUtil.switchToHotbarSlot(this.sheildSlot, false);
        }
        for (int i = 0; i < 3; ++i) {
            SoundLag.mc.getConnection().sendPacket((Packet)new CPacketUseEntity((Entity)SoundLag.mc.player, (SoundLag.mc.player.getHeldItemOffhand().getItem() == Items.SHIELD) ? EnumHand.OFF_HAND : EnumHand.MAIN_HAND));
            SoundLag.mc.getConnection().sendPacket((Packet)new CPacketPlayerTryUseItem((SoundLag.mc.player.getHeldItemOffhand().getItem() == Items.SHIELD) ? EnumHand.OFF_HAND : EnumHand.MAIN_HAND));
            SoundLag.mc.getConnection().sendPacket((Packet)new CPacketPlayerDigging(CPacketPlayerDigging.Action.RELEASE_USE_ITEM, BlockPos.ORIGIN, EnumFacing.UP));
        }
    }
}
